# Duration.Finance Production Environment Template
# Copy this file to .env.production and fill in actual values
# NEVER commit actual production values to version control

# ========================================
# APPLICATION CONFIGURATION
# ========================================
NODE_ENV=production
NEXT_PUBLIC_APP_ENV=production
NEXT_PUBLIC_APP_VERSION=1.0.0

# ========================================
# BLOCKCHAIN CONFIGURATION
# ========================================

# Private Keys (CRITICAL - Use hardware wallet or secure vault)
PRIVATE_KEY=${VAULT_PRIVATE_KEY}  # DO NOT hardcode, use secure key management
DEPLOYER_PRIVATE_KEY=${VAULT_DEPLOYER_KEY}  # For contract deployment

# RPC URLs (Production endpoints)
BASE_RPC_URL=https://api.developer.coinbase.com/rpc/v1/base/${COINBASE_API_KEY}
BASE_TESTNET_RPC_URL=https://api.developer.coinbase.com/rpc/v1/base-sepolia/${COINBASE_API_KEY}

# Block Explorer
BASESCAN_API_KEY=${BASESCAN_PROD_KEY}

# Contract Addresses (Set after deployment)
NEXT_PUBLIC_DURATION_OPTIONS_ADDRESS_BASE=0x0000000000000000000000000000000000000000
NEXT_PUBLIC_SETTLEMENT_ROUTER_ADDRESS_BASE=0x0000000000000000000000000000000000000000

# ========================================
# EXTERNAL API CONFIGURATION
# ========================================

# 1inch Integration (PRODUCTION KEYS)
ONEINCH_API_KEY=${ONEINCH_PROD_API_KEY}
ONEINCH_API_URL=https://api.1inch.dev

# OnchainKit Configuration
NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME=duration
NEXT_PUBLIC_ONCHAINKIT_API_KEY=${COINBASE_API_KEY}
NEXT_PUBLIC_URL=https://duration.finance
NEXT_PUBLIC_ICON_URL=https://duration.finance/logo.png

# WalletConnect
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=${WALLETCONNECT_PROD_ID}

# ========================================
# DATABASE CONFIGURATION
# ========================================

# PostgreSQL (Production Database)
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/${DB_NAME}?sslmode=require

# Database Credentials (Store in vault)
DB_HOST=${PROD_DB_HOST}
DB_NAME=duration_finance_production
DB_USER=${PROD_DB_USER}
DB_PASSWORD=${PROD_DB_PASSWORD}

# Connection Pool Settings
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000

# ========================================
# SECURITY CONFIGURATION
# ========================================

# Encryption & JWT (Generate strong keys)
JWT_SECRET=${VAULT_JWT_SECRET}  # 256-bit key
ENCRYPTION_KEY=${VAULT_ENCRYPTION_KEY}  # 256-bit key

# Security Settings
SECURITY_STRICT_MODE=true
REQUIRE_INTERNAL_AUTH=true
ENABLE_IP_VALIDATION=true
ENABLE_ORIGIN_VALIDATION=true
INTERNAL_API_KEY=${VAULT_INTERNAL_API_KEY}

# Allowed Access
ALLOWED_ORIGINS=https://duration.finance,https://www.duration.finance
ALLOWED_IPS=  # Production IPs only
ALLOWED_CIDRS=  # Limit to production subnets

# Rate Limiting (Production settings)
INTERNAL_RATE_LIMIT_WINDOW_MS=60000
INTERNAL_RATE_LIMIT_MAX_REQUESTS=1000
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# x402 PAYMENT SYSTEM
# ========================================

# x402 Configuration
X402_ENABLED=true
X402_PAYMENT_ENABLED=true
X402_CHAIN_ID=8453  # Base mainnet
X402_COST_USDC=1.0
X402_POST_OFFER_COST_USDC=1.0
X402_PAYMENT_RECIPIENT=${PRODUCTION_PAYMENT_RECIPIENT}
X402_RATE_LIMIT_WINDOW_MS=60000
X402_RATE_LIMIT_MAX_REQUESTS=10

# ========================================
# CACHING & PERFORMANCE
# ========================================

# Redis Configuration
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:6379
REDIS_PASSWORD=${VAULT_REDIS_PASSWORD}
REDIS_HOST=${PROD_REDIS_HOST}
REDIS_TOKEN=${VAULT_REDIS_TOKEN}

# Cache Settings
PRICE_CACHE_TTL=30000  # 30 seconds
COMMITMENT_CACHE_TTL=60000  # 1 minute

# ========================================
# MONITORING & LOGGING
# ========================================

# Audit Logging
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_DESTINATION=remote

# Monitoring
MONITORING_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
METRICS_ENDPOINT=https://metrics.duration.finance/api/metrics

# Error Tracking
SENTRY_DSN=${SENTRY_PRODUCTION_DSN}
SENTRY_ENVIRONMENT=production

# Security Monitoring
SECURITY_WEBHOOK_URL=${SECURITY_INCIDENT_WEBHOOK}
SECURITY_LOG_LEVEL=warn

# ========================================
# FRAME/MINI APP CONFIGURATION
# ========================================

# Farcaster Frame Settings
FARCASTER_HEADER=${PROD_FARCASTER_HEADER}
FARCASTER_PAYLOAD=${PROD_FARCASTER_PAYLOAD}
FARCASTER_SIGNATURE=${PROD_FARCASTER_SIGNATURE}

# Mini App Metadata
NEXT_PUBLIC_APP_SUBTITLE=Duration.Finance
NEXT_PUBLIC_APP_DESCRIPTION=Duration exposure made easy
NEXT_PUBLIC_APP_SPLASH_IMAGE=https://duration.finance/splash.png
NEXT_PUBLIC_SPLASH_BACKGROUND_COLOR=#1E40AF
NEXT_PUBLIC_APP_PRIMARY_CATEGORY=finance
NEXT_PUBLIC_APP_HERO_IMAGE=https://duration.finance/hero.png
NEXT_PUBLIC_APP_TAGLINE=An option a day keeps the degen away
NEXT_PUBLIC_APP_OG_TITLE=Duration.Finance
NEXT_PUBLIC_APP_OG_DESCRIPTION=A protocolized peer to peer options venue
NEXT_PUBLIC_APP_OG_IMAGE=https://duration.finance/hero.png

# ========================================
# SSL/TLS CONFIGURATION
# ========================================

# SSL Certificate Paths (if using custom certs)
SSL_CERT_PATH=/etc/ssl/certs/duration.finance.crt
SSL_KEY_PATH=/etc/ssl/private/duration.finance.key
SSL_CA_PATH=/etc/ssl/certs/ca-certificate.crt

# HTTPS Settings
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# ========================================
# BACKUP & DISASTER RECOVERY
# ========================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=${BACKUP_S3_BUCKET}

# Recovery Settings
RECOVERY_POINT_OBJECTIVE=1h  # Max 1 hour data loss
RECOVERY_TIME_OBJECTIVE=15m  # Max 15 minutes downtime

# ========================================
# DOCKER & DEPLOYMENT
# ========================================

# Container Configuration
DOCKER_MEMORY_LIMIT=1G
DOCKER_CPU_LIMIT=1.0
DOCKER_RESTART_POLICY=unless-stopped

# Health Check
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=5s
HEALTHCHECK_RETRIES=3

# ========================================
# FEATURE FLAGS
# ========================================

# Feature Toggles (Production)
ENABLE_PORTFOLIO_TAB=true
ENABLE_ADVANCED_CHARTS=false
ENABLE_MOBILE_APP=false
ENABLE_ANALYTICS=true
ENABLE_NOTIFICATIONS=true

# Debug Settings (Should be false in production)
DEBUG_MODE=false
VERBOSE_LOGGING=false
ENABLE_MOCK_DATA=false
SKIP_SIGNATURE_VALIDATION=false

# ========================================
# COMPLIANCE & LEGAL
# ========================================

# Compliance Settings
ENABLE_KYC=false  # Set to true if required
ENABLE_AML_CHECKS=false  # Set to true if required
REQUIRE_TERMS_ACCEPTANCE=true
PRIVACY_POLICY_VERSION=1.0
TERMS_OF_SERVICE_VERSION=1.0

# Geographic Restrictions (if applicable)
BLOCKED_COUNTRIES=  # Comma-separated country codes
BLOCKED_REGIONS=  # Comma-separated region codes

# ========================================
# PRODUCTION DEPLOYMENT NOTES
# ========================================

# CRITICAL SECURITY REMINDERS:
# 1. NEVER commit this file with real values to version control
# 2. Use a secure secret management system (AWS Secrets Manager, HashiCorp Vault, etc.)
# 3. Rotate all secrets regularly (quarterly minimum)
# 4. Use different keys for different environments
# 5. Enable monitoring for all secret access
# 6. Implement proper backup for secret recovery

# DEPLOYMENT CHECKLIST:
# [ ] All secrets stored in secure vault
# [ ] SSL certificates installed and valid
# [ ] Database backups configured and tested
# [ ] Monitoring and alerting set up
# [ ] Security scan completed
# [ ] Performance baseline established
# [ ] Incident response team notified

# SECURITY CONTACTS:
# Security Team: security@duration.finance
# Emergency Contact: +1-XXX-XXX-XXXX
# Incident Response: incidents@duration.finance